

Thought about deployment repo structure for 6 seconds
Below is an example directory structure and all the key files for a separate “deployment” repository that references the official AppFlowy code. In this scenario, we keep all Podman/Caddy configuration files in one place, and use a Git submodule (or a simple clone script) to bring in the AppFlowy source.

Repository Name Example: appflowy-podman-deployment

You can adapt this to your specific naming, environment, or build preferences.

File/Directory Tree
less
Copy code
appflowy-podman-deployment
├─ appflowy/           # (Submodule pointing to https://github.com/AppFlowy-IO/AppFlowy.git)
├─ .gitignore
├─ .env.example
├─ build_appflowy.sh
├─ Caddyfile
├─ podman-compose.yml
└─ README.md
Below are all these files with sample content. Adjust them as needed.

1. .gitignore
Make sure you don’t commit real secrets or large build artifacts.

bash
Copy code
# .gitignore

# Ignore the real .env file with secrets
.env

# Ignore Flutter build artifacts (if you do local builds)
appflowy/frontend/flowy_infra/build/
appflowy/frontend/flowy_infra/.dart_tool/
appflowy/frontend/flowy_infra/.packages
appflowy/frontend/flowy_infra/pubspec.lock

# Rust target folder
appflowy/backend/target/

# Additional OS / IDE-specific files
.DS_Store
*.swp
*.swo
.vscode/
.idea/
2. .env.example
An example environment file to demonstrate what variables you’ll need.
Do not store real passwords in your repo; rename this to .env locally and update the values.

bash
Copy code
# .env.example

# --------------------------
# PostgreSQL Credentials
# --------------------------
APPFLOWY_DB_USER=appflowy
APPFLOWY_DB_PASS=superSecretPassword
APPFLOWY_DB_NAME=appflowy

# --------------------------
# AppFlowy Backend Config
# --------------------------
APPFLOWY_BACKEND__SECRET_KEY=myRandomSecretKey
APPFLOWY_BACKEND__WEB_SOCKET__EXTERNAL_URL=appflowy.productshop.io

# --------------------------
# Caddy (Domain + Email)
# --------------------------
CADDY_DOMAIN=appflowy.productshop.io
CADDY_EMAIL=info@productshop.io

# --------------------------------
# AWS + S3 for Backups
# --------------------------------
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
AWS_DEFAULT_REGION=us-east-1
S3_BUCKET_NAME=your-s3-bucket-name